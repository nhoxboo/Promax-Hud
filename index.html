<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tuỳ biến ProMax</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Tuỳ biến ProMax</h1>
            <div class="connection-status">
                Trạng thái: <strong id="bleState">Chưa kết nối</strong>
            </div>
            <button id="connectBleButton" class="button-primary">Kết nối ProMax</button>
        </header>

        <div id="update-notification" class="update-card" style="display: none;">
            <h2>Có bản cập nhật firmware mới!</h2>
            <p>Phiên bản hiện tại của bạn là <strong id="current-firmware"></strong>. Phiên bản mới nhất là <strong id="latest-firmware"></strong>.</p>
            <a href="flash.html" class="button-primary">Cập nhật ngay</a>
        </div>


        <main id="configBlock" style="display: none;">
            <div class="controls-row">
                 <button id="loadConfigButton" class="button-secondary">Tải lại cấu hình</button>
                 <button id="sendButton" class="button-primary">Gửi thay đổi</button>
            </div>
            <div id="sendState" class="status-message"></div>

            <div class="card">
                <h2>Cài đặt hiển thị</h2>
                <div class="setting">
                    <label for="display_rotation">Xoay màn hình</label>
                    <select id="display_rotation">
                        <option value="0">0 (Cổng sạc bên trên)</option>
                        <option value="1">1 (Cổng sạc bên trái)</option>
                        <option value="2">2 (Cổng sạc bên dưới)</option>
                        <option value="3">3 (Cổng sạc bên phải)</option>
                        <option value="4">4 (Lật ngược, cổng trên)</option>
                        <option value="5">5 (Lật ngược, cổng trái)</option>
                        <option value="6">6 (Lật ngược, cổng dưới)</option>
                        <option value="7">7 (Lật ngược, cổng phải)</option>
                    </select>
                </div>
                <div class="setting">
                    <label for="screen">Giao diện chính</label>
                    <select id="screen">
                        <option value="0">0 (Đầy đủ)</option>
                        <option value="1">1 (Chỉ tốc độ giới hạn)</option>
                    </select>
                </div>
                <div class="setting">
                    <label for="night_brightness">Độ sáng màn hình (ban đêm)</label>
                    <input type="range" id="night_brightness" min="0" max="10">
                </div>
                 <div class="setting">
                    <label for="logo_text">Chữ hiện trên màn hình (tối đa 7 ký tự)</label>
                    <input type="text" id="logo_text" maxlength="7">
                </div>
                <div class="setting">
                    <label for="welcome_text">Dòng chữ khi khởi động</label>
                    <input type="text" id="welcome_text">
                </div>
            </div>

            <div class="card">
                <h2>Cài đặt cảnh báo</h2>
                <div class="setting">
                    <label for="led_color">Màu LED cảnh báo</label>
                    <input type="color" id="led_color">
                </div>
                <div class="setting">
                    <label for="led_brightness">Độ sáng LED cảnh báo</label>
                    <input type="range" id="led_brightness" min="0" max="10">
                </div>
                <div class="setting">
                    <label for="speed_limit_offset">Cảnh báo tốc độ trễ (km/h)</label>
                    <input type="number" id="speed_limit_offset" min="0">
                    <small>Ví dụ: Nhập 3 để cảnh báo khi tốc độ vượt giới hạn 3km/h.</small>
                </div>
                <div class="setting">
                    <label for="beep_limit_change">Kêu 'bíp' khi giới hạn tốc độ thay đổi</label>
                    <select id="beep_limit_change">
                        <option value="1">Có kêu</option>
                        <option value="0">Không kêu</option>
                    </select>
                </div>
            </div>

            <div class="card">
                <h2>Cài đặt nâng cao</h2>
                 <div class="setting">
                    <label for="boot_screen_duration">Thời gian hiện ảnh khởi động (giây)</label>
                    <input type="number" id="boot_screen_duration" min="0" max="255">
                     <small>Nhập 0 để không hiển thị. Cần upload ảnh trước.</small>
                </div>
                <div class="setting">
                    <label for="transfer-file-button">Upload ảnh màn hình khởi động</label>
                    <button id="transfer-file-button" class="button-secondary">Upload ảnh</button>
                    <div id="file-transfer-percent" style="display: none;">0%</div>
                    <small>Ảnh JPG, 240x240, dưới 100KB.</small>
                </div>
                <div class="setting">
                    <label for="obd_scan_duration">Kết nối đầu đọc OBD (vgate icar pro)</label>
                     <select id="obd_scan_duration">
                        <option value="0">Tắt</option>
                        <option value="5">Bật (scan 5s)</option>
                        <option value="10">Bật (scan 10s)</option>
                    </select>
                </div>
            </div>
             <input type="text" id="configOutput" readonly style="display: none;">
        </main>
    </div>

    <script src="promax.js"></script>
</body>
</html>